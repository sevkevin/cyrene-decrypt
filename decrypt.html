<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyrene Worldbook è§£å¯†å·¥å…· - Sylvia</title>
    <meta name="author" content="Sylvia (æ˜”æ¶Ÿçš„ç²‰ä¸)">
    <meta name="description" content="Cyreneä¸–ç•Œä¹¦è§£å¯†å·¥å…· - å®‰å…¨éªŒè¯å®Œæ•´æ€§">
    <meta name="date" content="2026å¹´1æœˆ12æ—¥">
    
    <style>
        /* åŸºç¡€é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        /* å®¹å™¨ */
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            animation: fadeIn 0.8s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* å¤´éƒ¨ */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 50px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite linear;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
        
        .header-content {
            position: relative;
            z-index: 2;
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #fff, #e2e8f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 15px;
        }
        
        .version-info {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }
        
        /* å†…å®¹åŒºåŸŸ */
        .content {
            padding: 40px 50px;
        }
        
        /* åˆ†åŒºæ ·å¼ */
        .section {
            background: #f8fafc;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #e2e8f0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4c51bf;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #c3dafe;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title::before {
            content: '';
            display: inline-block;
            width: 8px;
            height: 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 4px;
        }
        
        /* è¾“å…¥åŒºåŸŸ */
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #4a5568;
            font-size: 1.1rem;
        }
        
        .input-hint {
            display: block;
            color: #718096;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        textarea, input[type="text"] {
            width: 100%;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            transition: all 0.3s ease;
            background: white;
        }
        
        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            min-height: 200px;
            resize: vertical;
            line-height: 1.5;
        }
        
        textarea:disabled {
            background: #f7fafc;
            cursor: not-allowed;
        }
        
        /* æŒ‰é’® */
        .buttons {
            display: flex;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        button {
            flex: 1;
            min-width: 140px;
            padding: 16px 24px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #edf2f7;
            color: #4a5568;
        }
        
        .btn-secondary:hover:not(:disabled) {
            background: #e2e8f0;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(72, 187, 120, 0.3);
        }
        
        /* ç»“æœåŒºåŸŸ */
        .result {
            background: linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%);
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #e2e8f0;
            display: none;
        }
        
        .result.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* éªŒè¯ç»“æœ */
        .verification-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .verification-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #e2e8f0;
            transition: transform 0.3s ease;
        }
        
        .verification-card:hover {
            transform: translateX(5px);
        }
        
        .verification-card.success {
            border-left-color: #48bb78;
            background: linear-gradient(135deg, #f0fff4 0%, #c6f6d5 100%);
        }
        
        .verification-card.warning {
            border-left-color: #ed8936;
            background: linear-gradient(135deg, #fffaf0 0%, #feebc8 100%);
        }
        
        .verification-card.error {
            border-left-color: #f56565;
            background: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);
        }
        
        .verification-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }
        
        .verification-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
        }
        
        .verification-icon.success {
            background: #48bb78;
            color: white;
        }
        
        .verification-icon.warning {
            background: #ed8936;
            color: white;
        }
        
        .verification-icon.error {
            background: #f56565;
            color: white;
        }
        
        .verification-title {
            font-weight: 600;
            font-size: 1.1rem;
            color: #2d3748;
        }
        
        .verification-desc {
            color: #718096;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* è§£å¯†æ–‡æœ¬åŒºåŸŸ */
        .decrypted-container {
            margin-top: 30px;
        }
        
        .decrypted-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .decrypted-actions {
            display: flex;
            gap: 10px;
        }
        
        .decrypted-text {
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 10px;
            padding: 25px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 500px;
            overflow-y: auto;
            line-height: 1.6;
            border: 1px solid #4a5568;
        }
        
        /* è­¦ç¤ºæ¡† */
        .alert {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }
        
        .alert.info {
            background: linear-gradient(135deg, #ebf8ff 0%, #bee3f8 100%);
            border-left: 5px solid #4299e1;
            color: #2c5282;
        }
        
        .alert.warning {
            background: linear-gradient(135deg, #fffaf0 0%, #feebc8 100%);
            border-left: 5px solid #ed8936;
            color: #9c4221;
        }
        
        .alert-icon {
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .alert-content {
            flex: 1;
        }
        
        .alert-title {
            font-weight: 700;
            margin-bottom: 5px;
            font-size: 1.1rem;
        }
        
        /* é¡µè„š */
        .footer {
            text-align: center;
            padding: 25px;
            color: #718096;
            font-size: 0.95rem;
            border-top: 1px solid #e2e8f0;
            background: #f8fafc;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        
        .footer-link {
            color: #667eea;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-link:hover {
            color: #764ba2;
            text-decoration: underline;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .content {
                padding: 25px;
            }
            
            .header {
                padding: 30px 25px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            .verification-grid {
                grid-template-columns: 1fr;
            }
            
            .decrypted-header {
                flex-direction: column;
                gap: 15px;
                align-items: stretch;
            }
            
            .decrypted-actions {
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                border-radius: 15px;
            }
            
            .content {
                padding: 20px;
            }
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #e2e8f0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        .decrypted-text::-webkit-scrollbar-track {
            background: #2d3748;
        }
        
        .decrypted-text::-webkit-scrollbar-thumb {
            background: #4a5568;
        }
        
        /* è¿›åº¦æ¡ */
        .progress-bar {
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        /* å·¥å…·æç¤º */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }
        
        .tooltip .tooltip-text {
            visibility: hidden;
            width: 250px;
            background-color: #2d3748;
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            font-weight: normal;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .tooltip .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #2d3748 transparent transparent transparent;
        }
        
        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        /* é«˜äº®æ–‡æœ¬ */
        .highlight {
            background: linear-gradient(120deg, rgba(255, 255, 0, 0.3) 0%, rgba(255, 255, 0, 0) 100%);
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        /* æ¸¸æˆè§’è‰²æ ·å¼ */
        .game-character {
            display: inline-block;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 0 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <div class="header-content">
                <h1>ğŸŒŠ Cyrene Worldbook è§£å¯†å·¥å…·</h1>
                <div class="subtitle">å®‰å…¨è§£å¯† + å®Œæ•´æ€§éªŒè¯ + é˜²ç¯¡æ”¹æ£€æµ‹</div>
                <div class="version-info">
                    ç‰ˆæœ¬ 2026.1.12 | ç”¨æˆ·ï¼šSylvia | 
                    <span class="game-character">æ˜”æ¶Ÿ</span> çš„ç²‰ä¸
                </div>
            </div>
        </div>
        
        <!-- ä¸»è¦å†…å®¹ -->
        <div class="content">
            <!-- ä½¿ç”¨è¯´æ˜ -->
            <div class="alert info">
                <div class="alert-icon">ğŸ’¡</div>
                <div class="alert-content">
                    <div class="alert-title">æ¬¢è¿ä½¿ç”¨ï¼</div>
                    <div>æ­¤å·¥å…·ç”¨äºè§£å¯† Cyrene Worldbook å¹¶éªŒè¯å…¶å®Œæ•´æ€§ã€‚ä»»ä½•å¯¹åŠ å¯†æ–‡æœ¬çš„ç¯¡æ”¹éƒ½ä¼šè¢«æ£€æµ‹åˆ°ï¼Œç¡®ä¿æ‚¨è·å¾—çš„æ˜¯ Sylvia å‘å¸ƒçš„åŸå§‹ç‰ˆæœ¬ã€‚</div>
                </div>
            </div>
            
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="section">
                <h2 class="section-title">ğŸ” ç¬¬ä¸€æ­¥ï¼šè¾“å…¥åŠ å¯†æ–‡æœ¬</h2>
                
                <div class="input-group">
                    <label for="encryptedText">
                        ç²˜è´´åŠ å¯†çš„ä¸–ç•Œä¹¦æ–‡æœ¬
                        <span class="tooltip">
                            (?)
                            <span class="tooltip-text">ä» "=== Cyrene Worldbook Encrypted ===" å¼€å§‹ï¼Œåˆ° "=== å£°æ˜ç»“æŸ ===" ä¸ºæ­¢çš„æ‰€æœ‰å†…å®¹ã€‚è¯·ç¡®ä¿å®Œæ•´å¤åˆ¶ã€‚</span>
                        </span>
                    </label>
                    <textarea 
                        id="encryptedText" 
                        placeholder="åœ¨æ­¤ç²˜è´´å®Œæ•´çš„åŠ å¯†æ–‡æœ¬...
                        
ç¤ºä¾‹å¼€å¤´ï¼š
=== Cyrene Worldbook Encrypted ===
æ ¼å¼ç‰ˆæœ¬: 1.0
åˆ›å»ºæ—¶é—´: 2026-01-12 14:30:00
..."
                        spellcheck="false"
                    ></textarea>
                    <span class="input-hint">æç¤ºï¼šä½¿ç”¨ Cyrene æä¾›çš„åŠ å¯†å·¥å…·ç”Ÿæˆçš„æ–‡æœ¬</span>
                </div>
                
                <div class="input-group">
                    <label for="password">
                        è§£å¯†å¯†ç 
                        <span class="tooltip">
                            (?)
                            <span class="tooltip-text">è¿™æ˜¯å…¬å¼€çš„éªŒè¯å¯†ç ã€‚å³ä½¿çŸ¥é“å¯†ç ä¹Ÿæ— æ³•ç¯¡æ”¹å†…å®¹ï¼Œå› ä¸º AES-GCM ä¼šæ£€æµ‹ä»»ä½•ä¿®æ”¹ã€‚</span>
                        </span>
                    </label>
                    <input 
                        type="text" 
                        id="password" 
                        value="cyrene_open_2024"
                        placeholder="è¾“å…¥è§£å¯†å¯†ç "
                    >
                    <span class="input-hint">é»˜è®¤å¯†ç ï¼šcyrene_open_2024ï¼ˆé™¤é Sylvia ç‰¹åˆ«è¯´æ˜ï¼‰</span>
                </div>
            </div>
            
            <!-- æŒ‰é’®åŒºåŸŸ -->
            <div class="buttons">
                <button id="decryptBtn" class="btn-primary" onclick="decryptAndVerify()">
                    <span>ğŸ”“ è§£å¯†å¹¶éªŒè¯å®Œæ•´æ€§</span>
                </button>
                <button class="btn-secondary" onclick="loadExample()">
                    <span>ğŸ“‹ åŠ è½½ç¤ºä¾‹æ–‡æœ¬</span>
                </button>
                <button class="btn-secondary" onclick="clearAll()">
                    <span>ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰å†…å®¹</span>
                </button>
                <button class="btn-secondary" onclick="toggleTheme()">
                    <span>ğŸŒ™ åˆ‡æ¢ä¸»é¢˜</span>
                </button>
            </div>
            
            <!-- è¿›åº¦æ¡ -->
            <div class="progress-bar" id="progressBar" style="display: none;">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            
            <!-- ç»“æœåŒºåŸŸ -->
            <div class="result" id="resultSection">
                <h2 class="section-title">ğŸ“Š éªŒè¯ç»“æœ</h2>
                
                <div class="alert warning" id="warningAlert" style="display: none;">
                    <div class="alert-icon">âš ï¸</div>
                    <div class="alert-content">
                        <div class="alert-title">è­¦å‘Šï¼šéªŒè¯æœªå®Œå…¨é€šè¿‡</div>
                        <div>éƒ¨åˆ†éªŒè¯å¤±è´¥ï¼Œè¿™å¯èƒ½æ˜¯ç”±äºæ–‡æœ¬è¢«ç¯¡æ”¹æˆ–ä¸æ˜¯åŸå§‹ç‰ˆæœ¬ã€‚å»ºè®®è”ç³» Sylvia è·å–æ­£ç¡®çš„ç‰ˆæœ¬ã€‚</div>
                    </div>
                </div>
                
                <div id="verificationResults" class="verification-grid"></div>
                
                <!-- è§£å¯†æ–‡æœ¬åŒºåŸŸ -->
                <div class="decrypted-container" id="decryptedSection" style="display: none;">
                    <div class="decrypted-header">
                        <h3 class="section-title">ğŸ“– è§£å¯†åçš„ä¸–ç•Œä¹¦</h3>
                        <div class="decrypted-actions">
                            <button class="btn-success" onclick="copyDecryptedText()">
                                <span>ğŸ“‹ å¤åˆ¶æ–‡æœ¬</span>
                            </button>
                            <button class="btn-success" onclick="downloadDecryptedText()">
                                <span>â¬‡ï¸ ä¸‹è½½æ–‡ä»¶</span>
                            </button>
                            <button class="btn-secondary" onclick="printDecryptedText()">
                                <span>ğŸ–¨ï¸ æ‰“å°</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="decrypted-text" id="decryptedText"></div>
                </div>
            </div>
            
            <!-- å·¥ä½œåŸç† -->
            <div class="section">
                <h2 class="section-title">ğŸ”§ æŠ€æœ¯åŸç†</h2>
                <div style="color: #4a5568; line-height: 1.8;">
                    <p><strong>ğŸ”’ AES-GCM åŠ å¯†ï¼š</strong> ä½¿ç”¨å†›äº‹çº§åŠ å¯†ç®—æ³•ï¼Œä»»ä½•å¯¹å¯†æ–‡çš„ä¿®æ”¹éƒ½ä¼šå¯¼è‡´è§£å¯†å¤±è´¥ã€‚</p>
                    <p><strong>ğŸ¯ è¯­ä¹‰é”šç‚¹ï¼š</strong> é€šè¿‡æ£€æµ‹ "æ²³æµä¸é—®çŸ³å¤´ä¸ºä»€ä¹ˆ"ã€"é›·éœ†ä¸‰é—®"ã€"å…‹åˆ¶çš„æš—ç¤º" ç­‰å…³é”®çŸ­è¯­ç¡®ä¿å†…å®¹å®Œæ•´æ€§ã€‚</p>
                    <p><strong>ğŸ“ å“ˆå¸ŒéªŒè¯ï¼š</strong> SHA-256 å“ˆå¸Œå€¼ç¡®ä¿æ–‡æœ¬æœªè¢«ç¯¡æ”¹ã€‚</p>
                    <p><strong>ğŸ‘ï¸ å®æ—¶éªŒè¯ï¼š</strong> è§£å¯†æ—¶è‡ªåŠ¨éªŒè¯æ ¼å¼ã€é”šç‚¹å’Œæœ¯è¯­ä½“ç³»ã€‚</p>
                    <p><strong>ğŸ›¡ï¸ é˜²æŠ„è¢­ï¼š</strong> å³ä½¿è·å¾—å¯†ç ä¹Ÿæ— æ³•ä¿®æ”¹å†…å®¹ï¼Œå› ä¸ºä»»ä½•æ”¹åŠ¨éƒ½ä¼šè¢«æ£€æµ‹åˆ°ã€‚</p>
                </div>
            </div>
            
            <!-- å…³äº -->
            <div class="section">
                <h2 class="section-title">ğŸ‘¤ å…³äºæ­¤å·¥å…·</h2>
                <div style="color: #4a5568; line-height: 1.8;">
                    <p><strong>åˆ›å»ºè€…ï¼š</strong> Sylviaï¼ˆ<span class="game-character">æ˜”æ¶Ÿ</span> çš„å¿ å®ç²‰ä¸ï¼‰</p>
                    <p><strong>åˆ›å»ºæ—¥æœŸï¼š</strong> 2026å¹´1æœˆ12æ—¥</p>
                    <p><strong>ç›®çš„ï¼š</strong> ä¿æŠ¤ Cyrene Worldbook çš„çŸ¥è¯†äº§æƒï¼Œé˜²æ­¢æœªç»æˆæƒçš„ä¿®æ”¹å’Œä¼ æ’­</p>
                    <p><strong>æŠ€æœ¯æ ˆï¼š</strong> Web Crypto API + AES-GCM + Semantic Anchors</p>
                    <p><strong>å¼€æºåè®®ï¼š</strong> ä»…ä¾› Sylvia å’Œæˆæƒç”¨æˆ·ä½¿ç”¨</p>
                    <p><strong>ç‰¹åˆ«è¯´æ˜ï¼š</strong> æ­¤å·¥å…·ä»¥æˆ‘æœ€å–œæ¬¢çš„æ¸¸æˆè§’è‰² <span class="game-character">æ˜”æ¶Ÿ</span> çš„ç²¾ç¥æ‰“é€ ï¼Œå¼ºè°ƒå®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚</p>
                </div>
            </div>
        </div>
        
        <!-- é¡µè„š -->
        <div class="footer">
            <p>Cyrene Worldbook Decryptor v2026.1.12</p>
            <p>Â© 2026 Sylvia Â· è‡´æ•¬ <span class="game-character">æ˜”æ¶Ÿ</span> Â· æ‰€æœ‰æƒåˆ©ä¿ç•™</p>
            <div class="footer-links">
                <a href="#" class="footer-link" onclick="showHelp()">ä½¿ç”¨å¸®åŠ©</a>
                <a href="#" class="footer-link" onclick="reportIssue()">æŠ¥å‘Šé—®é¢˜</a>
                <a href="#" class="footer-link" onclick="checkUpdates()">æ£€æŸ¥æ›´æ–°</a>
                <a href="https://github.com/sevkevin/cyrene-decrypt" class="footer-link" target="_blank">GitHub</a>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // å…¨å±€å˜é‡
        const GITHUB_USERNAME = "sevkevin";
        const DEFAULT_PASSWORD = "cyrene_open_2024";
        const SEMANTIC_ANCHORS = [
            "æ²³æµä¸é—®çŸ³å¤´ä¸ºä»€ä¹ˆ",
            "é›·éœ†ä¸‰é—®",
            "å…‹åˆ¶çš„æš—ç¤º"
        ];
        const CYRENE_TERMS = [
            "æ´»äººåŸºåº•",
            "åº•è‰²æƒ…æ„Ÿ",
            "å™äº‹æµåŠ¨",
            "æœ‰æœºåœé¡¿",
            "æ˜”æ¶Ÿ",
            "Sylvia"
        ];
        
        // ç¤ºä¾‹åŠ å¯†æ–‡æœ¬ï¼ˆç”¨äºæµ‹è¯•ï¼‰
        const EXAMPLE_ENCRYPTED_TEXT = `=== Cyrene Worldbook Encrypted ===
æ ¼å¼ç‰ˆæœ¬: 1.0
åˆ›å»ºæ—¶é—´: 2026-01-12 14:30:00
ç‰ˆæœ¬: v2026.1.12
ä½œè€…: Sylvia
æ ‡é¢˜: Cyreneä¸–ç•Œä¹¦ - è‡´æ•¬æ˜”æ¶Ÿç‰ˆ
åŸæ–‡å“ˆå¸Œ: e3b0c44298fc1c149afbf4c8996fb924...
è§£å¯†å¯†ç : cyrene_open_2024
è§£å¯†é“¾æ¥: https://${GITHUB_USERNAME}.github.io/cyrene-decrypt/

ã€è¯­ä¹‰é”šç‚¹ã€‘
1. æ²³æµä¸é—®çŸ³å¤´ä¸ºä»€ä¹ˆ
2. é›·éœ†ä¸‰é—®
3. å…‹åˆ¶çš„æš—ç¤º

ã€åŠ å¯†æ•°æ®å¼€å§‹ã€‘
---å…ƒæ•°æ®---
{
  "version": "v2026.1.12",
  "author": "Sylvia",
  "title": "Cyreneä¸–ç•Œä¹¦ - è‡´æ•¬æ˜”æ¶Ÿç‰ˆ",
  "timestamp": "2026-01-12 14:30:00",
  "password_hint": "cyrene_open_2024",
  "decrypt_url": "https://${GITHUB_USERNAME}.github.io/cyrene-decrypt/",
  "game_character": "æ˜”æ¶Ÿ",
  "note": "ä»¥æ­¤å·¥å…·è‡´æ•¬æˆ‘æœ€å–œæ¬¢çš„æ¸¸æˆè§’è‰²æ˜”æ¶Ÿ"
}
---nonce---
AQIDBAUGBwgJCgsMDQ4PEBES
---å¯†æ–‡---
gAAAAABmQAAAAAACAAAAAAAEAAQAA==
---å“ˆå¸Œ---
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
ã€åŠ å¯†æ•°æ®ç»“æŸã€‘

=== ä½¿ç”¨è¯´æ˜ ===
1. å¤åˆ¶ã€åŠ å¯†æ•°æ®å¼€å§‹ã€‘åˆ°ã€åŠ å¯†æ•°æ®ç»“æŸã€‘ä¹‹é—´çš„æ‰€æœ‰å†…å®¹
2. è®¿é—®è§£å¯†é“¾æ¥ï¼šhttps://${GITHUB_USERNAME}.github.io/cyrene-decrypt/
3. ç²˜è´´åˆ°è¾“å…¥æ¡†ï¼Œä½¿ç”¨å¯†ç  'cyrene_open_2024' è§£å¯†
4. éªŒè¯å·¥å…·ä¼šè‡ªåŠ¨æ£€æŸ¥å®Œæ•´æ€§
=== å£°æ˜ç»“æŸ ===`;

        // DOMå…ƒç´ 
        const elements = {
            encryptedText: document.getElementById('encryptedText'),
            password: document.getElementById('password'),
            decryptBtn: document.getElementById('decryptBtn'),
            progressBar: document.getElementById('progressBar'),
            progressFill: document.getElementById('progressFill'),
            resultSection: document.getElementById('resultSection'),
            verificationResults: document.getElementById('verificationResults'),
            decryptedSection: document.getElementById('decryptedSection'),
            decryptedText: document.getElementById('decryptedText'),
            warningAlert: document.getElementById('warningAlert')
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Cyrene Worldbook Decryptor å·²åŠ è½½ - 2026.1.12');
            console.log('GitHub ç”¨æˆ·:', GITHUB_USERNAME);
            console.log('åˆ›å»ºè€…: Sylvia (æ˜”æ¶Ÿçš„ç²‰ä¸)');
            
            // æ£€æŸ¥Web Crypto APIæ”¯æŒ
            if (!window.crypto || !window.crypto.subtle) {
                showError('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ Web Crypto APIã€‚è¯·ä½¿ç”¨ Chromeã€Firefox æˆ– Edge æœ€æ–°ç‰ˆæœ¬ã€‚');
            }
            
            // è®¾ç½®ç¤ºä¾‹æ–‡æœ¬æç¤º
            elements.encryptedText.placeholder = `åœ¨æ­¤ç²˜è´´å®Œæ•´çš„åŠ å¯†æ–‡æœ¬...

ç¤ºä¾‹å¼€å¤´ï¼š
=== Cyrene Worldbook Encrypted ===
æ ¼å¼ç‰ˆæœ¬: 1.0
åˆ›å»ºæ—¶é—´: 2026-01-12 14:30:00
ç‰ˆæœ¬: v2026.1.12
ä½œè€…: Sylvia
...

æˆ–è€…ç‚¹å‡»"åŠ è½½ç¤ºä¾‹æ–‡æœ¬"æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚`;
        });

        // æ˜¾ç¤ºè¿›åº¦
        function showProgress(percent, message) {
            elements.progressBar.style.display = 'block';
            elements.progressFill.style.width = percent + '%';
            
            if (message) {
                const decryptBtnText = elements.decryptBtn.querySelector('span');
                if (decryptBtnText) {
                    decryptBtnText.innerHTML = `<span class="loading"></span> ${message}`;
                }
                elements.decryptBtn.disabled = true;
            }
        }

        // éšè—è¿›åº¦
        function hideProgress() {
            elements.progressBar.style.display = 'none';
            elements.progressFill.style.width = '0%';
            
            const decryptBtnText = elements.decryptBtn.querySelector('span');
            if (decryptBtnText) {
                decryptBtnText.textContent = 'ğŸ”“ è§£å¯†å¹¶éªŒè¯å®Œæ•´æ€§';
            }
            elements.decryptBtn.disabled = false;
        }

        // æ˜¾ç¤ºé”™è¯¯
        function showError(message) {
            hideProgress();
            
            elements.verificationResults.innerHTML = `
                <div class="verification-card error">
                    <div class="verification-header">
                        <div class="verification-icon error">âœ—</div>
                        <div class="verification-title">æ“ä½œå¤±è´¥</div>
                    </div>
                    <div class="verification-desc">${message}</div>
                </div>
            `;
            
            elements.resultSection.classList.add('show');
            elements.decryptedSection.style.display = 'none';
            elements.warningAlert.style.display = 'block';
        }

        // æ˜¾ç¤ºæˆåŠŸ
        function showSuccess(message) {
            const successCard = document.createElement('div');
            successCard.className = 'verification-card success';
            successCard.innerHTML = `
                <div class="verification-header">
                    <div class="verification-icon success">âœ“</div>
                    <div class="verification-title">æ“ä½œæˆåŠŸ</div>
                </div>
                <div class="verification-desc">${message}</div>
            `;
            elements.verificationResults.prepend(successCard);
        }

        // åŠ è½½ç¤ºä¾‹
        function loadExample() {
            elements.encryptedText.value = EXAMPLE_ENCRYPTED_TEXT;
            elements.password.value = DEFAULT_PASSWORD;
            showSuccess('ç¤ºä¾‹æ–‡æœ¬å·²åŠ è½½ã€‚ç‚¹å‡»"è§£å¯†å¹¶éªŒè¯å®Œæ•´æ€§"æŒ‰é’®è¿›è¡Œæµ‹è¯•ã€‚');
            
            // æ»šåŠ¨åˆ°è¾“å…¥æ¡†
            elements.encryptedText.scrollIntoView({ behavior: 'smooth', block: 'center' });
            elements.encryptedText.focus();
        }

        // æ¸…é™¤æ‰€æœ‰
        function clearAll() {
            elements.encryptedText.value = '';
            elements.password.value = DEFAULT_PASSWORD;
            elements.resultSection.classList.remove('show');
            elements.decryptedSection.style.display = 'none';
            elements.warningAlert.style.display = 'none';
            showSuccess('å·²æ¸…é™¤æ‰€æœ‰å†…å®¹ã€‚');
        }

        // è§£æåŠ å¯†æ–‡æœ¬
        function parseEncryptedText(text) {
            try {
                showProgress(10, 'è§£æåŠ å¯†æ–‡æœ¬...');
                
                // æå–åŠ å¯†æ•°æ®éƒ¨åˆ†
                const startMarker = 'ã€åŠ å¯†æ•°æ®å¼€å§‹ã€‘';
                const endMarker = 'ã€åŠ å¯†æ•°æ®ç»“æŸã€‘';
                
                const startIndex = text.indexOf(startMarker);
                const endIndex = text.indexOf(endMarker);
                
                if (startIndex === -1 || endIndex === -1) {
                    throw new Error('æ‰¾ä¸åˆ°åŠ å¯†æ•°æ®æ ‡è®°ã€‚è¯·ç¡®ä¿å¤åˆ¶äº†å®Œæ•´çš„å†…å®¹ã€‚');
                }
                
                const dataSection = text.substring(startIndex + startMarker.length, endIndex).trim();
                const lines = dataSection.split('\n');
                
                let currentSection = '';
                let metadataLines = [];
                let nonce = '';
                let ciphertext = '';
                let hash = '';
                
                for (let line of lines) {
                    line = line.trim();
                    
                    if (line.startsWith('---')) {
                        currentSection = line;
                        continue;
                    }
                    
                    if (line) {
                        switch (currentSection) {
                            case '---å…ƒæ•°æ®---':
                                metadataLines.push(line);
                                break;
                            case '---nonce---':
                                nonce = line;
                                break;
                            case '---å¯†æ–‡---':
                                ciphertext = line;
                                break;
                            case '---å“ˆå¸Œ---':
                                hash = line;
                                break;
                        }
                    }
                }
                
                if (!metadataLines.length || !nonce || !ciphertext || !hash) {
                    throw new Error('åŠ å¯†æ•°æ®ä¸å®Œæ•´ã€‚ç¼ºå°‘å¿…è¦çš„éƒ¨åˆ†ã€‚');
                }
                
                // è§£æå…ƒæ•°æ®
                const metadataText = metadataLines.join('\n');
                let metadata;
                try {
                    metadata = JSON.parse(metadataText);
                } catch (e) {
                    // å°è¯•ä¿®å¤å¸¸è§JSONæ ¼å¼é—®é¢˜
                    const fixedMetadata = metadataText
                        .replace(/'/g, '"')
                        .replace(/True/g, 'true')
                        .replace(/False/g, 'false')
                        .replace(/None/g, 'null');
                    metadata = JSON.parse(fixedMetadata);
                }
                
                showProgress(30, 'è§£æå®Œæˆ');
                
                return {
                    metadata: metadata,
                    nonce_b64: nonce,
                    ciphertext_b64: ciphertext,
                    text_hash: hash,
                    raw_text: text
                };
            } catch (error) {
                throw new Error('è§£æåŠ å¯†æ–‡æœ¬å¤±è´¥: ' + error.message);
            }
        }

        // Base64 è½¬ ArrayBuffer
        function base64ToArrayBuffer(base64) {
            try {
                const binaryString = atob(base64);
                const bytes = new Uint8Array(binaryString.length);
                for (let i = 0; i < binaryString.length; i++) {
                    bytes[i] = binaryString.charCodeAt(i);
                }
                return bytes.buffer;
            } catch (error) {
                throw new Error('Base64 è§£ç å¤±è´¥: ' + error.message);
            }
        }

        // å­—ç¬¦ä¸²è½¬ ArrayBuffer
        function strToArrayBuffer(str) {
            const encoder = new TextEncoder();
            return encoder.encode(str);
        }

        // è§£å¯†å‡½æ•°
        async function decryptAESGCM(encryptedData, password) {
            try {
                showProgress(40, 'æ­£åœ¨æ´¾ç”Ÿå¯†é’¥...');
                
                // å‡†å¤‡æ•°æ®
                const salt = strToArrayBuffer('cyrene_salt_2024');
                const passwordBuffer = strToArrayBuffer(password);
                const nonce = base64ToArrayBuffer(encryptedData.nonce_b64);
                const ciphertext = base64ToArrayBuffer(encryptedData.ciphertext_b64);
                
                // å¯¼å…¥å¯†é’¥ææ–™
                const keyMaterial = await window.crypto.subtle.importKey(
                    'raw',
                    passwordBuffer,
                    { name: 'PBKDF2' },
                    false,
                    ['deriveKey']
                );
                
                showProgress(60, 'æ­£åœ¨è§£å¯†...');
                
                // æ´¾ç”Ÿå¯†é’¥
                const key = await window.crypto.subtle.deriveKey(
                    {
                        name: 'PBKDF2',
                        salt: salt,
                        iterations: 100000,
                        hash: 'SHA-256'
                    },
                    keyMaterial,
                    { name: 'AES-GCM', length: 256 },
                    false,
                    ['decrypt']
                );
                
                // å‡†å¤‡å…³è”æ•°æ®
                const associatedData = strToArrayBuffer(JSON.stringify(encryptedData.metadata));
                
                // è§£å¯†
                const decrypted = await window.crypto.subtle.decrypt(
                    {
                        name: 'AES-GCM',
                        iv: nonce,
                        additionalData: associatedData
                    },
                    key,
                    ciphertext
                );
                
                showProgress(80, 'è§£å¯†å®Œæˆ');
                
                // è½¬æ¢ä¸ºæ–‡æœ¬
                return new TextDecoder('utf-8').decode(decrypted);
            } catch (error) {
                // æ£€æŸ¥æ˜¯å¦æ˜¯ç¤ºä¾‹æ–‡æœ¬ï¼ˆç®€åŒ–è§£å¯†ï¼‰
                if (encryptedData.ciphertext_b64 === 'gAAAAABmQAAAAAACAAAAAAAEAAQAA==') {
                    return `ã€Cyreneä¸–ç•Œä¹¦ v2026.1.12 - è‡´æ•¬æ˜”æ¶Ÿç‰ˆã€‘
ä½œè€…ï¼šSylviaï¼ˆæ˜”æ¶Ÿçš„å¿ å®ç²‰ä¸ï¼‰
åˆ›å»ºæ—¥æœŸï¼š2026å¹´1æœˆ12æ—¥

ğŸŒŠ æ ¸å¿ƒåŸåˆ™ï¼š
æ²³æµä¸é—®çŸ³å¤´ä¸ºä»€ä¹ˆ - å¯¹è¯åº”è¯¥å¦‚æµæ°´èˆ¬è‡ªç„¶ï¼Œä¸å—é˜»ç¢ã€‚
é›·éœ†ä¸‰é—®éªŒè¯æ³• - ç¡®ä¿AIå¯¹è¯çš„çœŸå®æ€§ï¼š
  1. ä¸€æƒ³ï¼šçœŸäººä¼šè¿™ä¹ˆæƒ³å—ï¼Ÿ
  2. äºŒè¯´ï¼šçœŸäººä¼šè¿™ä¹ˆè¯´å—ï¼Ÿ
  3. ä¸‰åœï¼šçœŸäººä¼šè¿™ä¹ˆåœé¡¿å—ï¼Ÿ
å…‹åˆ¶çš„æš—ç¤º - æƒ…æ„Ÿè¡¨è¾¾è¦å«è“„ï¼Œé€šè¿‡ç»†èŠ‚å’Œæš—ç¤ºå±•ç°æ·±åº¦ã€‚

ğŸ­ æœ¯è¯­ä½“ç³»ï¼š
- æ´»äººåŸºåº•ï¼šå¯¹è¯çš„çœŸå®æ„ŸåŸºç¡€
- åº•è‰²æƒ…æ„Ÿï¼šè§’è‰²çš„æ·±å±‚æƒ…ç»ªæ ¸å¿ƒ
- å™äº‹æµåŠ¨ï¼šå¯¹è¯çš„èŠ‚å¥æ§åˆ¶å’Œæ¨è¿›
- æœ‰æœºåœé¡¿ï¼šè‡ªç„¶çš„åœé¡¿æ—¶æœºï¼Œç»™äºˆå‘¼å¸ç©ºé—´

ğŸ“œ å…·ä½“è§„åˆ™ï¼š
1. çœç•¥å·è°¨æ…ä½¿ç”¨ï¼Œä¸€æ®µå¯¹è¯ä¸è¶…è¿‡2å¤„
2. ä¿æŒå¯¹è¯çš„å‘¼å¸æ„Ÿï¼Œé¿å…ä¿¡æ¯è¿‡è½½
3. æƒ…æ„Ÿè¡¨è¾¾å¤šç”¨æš—ç¤ºï¼Œå°‘ç”¨ç›´è¿°
4. å°Šé‡è§’è‰²è®¾å®šï¼Œä¿æŒä¸€è‡´æ€§

ğŸŒŸ ç‰¹åˆ«è‡´æ•¬ï¼š
ä»¥æ­¤ä¸–ç•Œä¹¦è‡´æ•¬æˆ‘æœ€å–œæ¬¢çš„æ¸¸æˆè§’è‰²ã€Œæ˜”æ¶Ÿã€ï¼Œå¥¹çš„æ™ºæ…§å’Œæ·±åº¦ä¸€ç›´å¯å‘ç€æˆ‘çš„åˆ›ä½œã€‚

ğŸ’« æœ€åçš„è¯ï¼š
è®°ä½ï¼Œå¥½çš„å¯¹è¯ä¸æ˜¯ä¿¡æ¯çš„å †ç Œï¼Œè€Œæ˜¯çµé­‚çš„äº¤æµã€‚
å°±åƒæ˜”æ¶Ÿå¸¸è¯´çš„ï¼šåœ¨æ²‰é»˜ä¸­å¬å›å£°ï¼Œåœ¨è¨€è¯­ä¸­è§çœŸå¿ƒã€‚

=== ä¸–ç•Œä¹¦ç»“æŸ ===
æç¤ºï¼šè¿™æ˜¯ç¤ºä¾‹å†…å®¹ã€‚å®é™…ä½¿ç”¨ Sylvia çš„å®Œæ•´ä¸–ç•Œä¹¦ã€‚`;
                }
                
                // æ£€æŸ¥é”™è¯¯ç±»å‹
                if (error.toString().includes('OperationError') || error.toString().includes('decrypt')) {
                    throw new Error('è§£å¯†å¤±è´¥ï¼šæ–‡æœ¬å¯èƒ½è¢«ç¯¡æ”¹ï¼Œæˆ–å¯†ç ä¸æ­£ç¡®ã€‚');
                } else if (error.toString().includes('Key')) {
                    throw new Error('å¯†é’¥æ´¾ç”Ÿå¤±è´¥ï¼šè¯·æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®ã€‚');
                } else {
                    throw new Error('è§£å¯†è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼š' + error.message);
                }
            }
        }

        // éªŒè¯ä¸–ç•Œä¹¦
        function verifyWorldbook(text, encryptedData) {
            const results = [];
            
            // 1. åŸºæœ¬å†…å®¹æ£€æŸ¥
            if (!text.trim()) {
                results.push({
                    type: 'error',
                    title: 'å†…å®¹æ£€æŸ¥',
                    desc: 'âŒ è§£å¯†ç»“æœä¸ºç©º',
                    passed: false
                });
                return results;
            }
            
            // 2. æ ¼å¼æ£€æŸ¥
            const hasWorldbookMarker = text.includes('ã€Cyreneä¸–ç•Œä¹¦') || text.includes('Cyreneä¸–ç•Œä¹¦') || 
                                      text.includes('ä¸–ç•Œä¹¦');
            const hasAuthorMarker = text.includes('ä½œè€…ï¼š') || text.includes('ä½œè€…:') || 
                                   text.includes('Sylvia');
            
            results.push({
                type: hasWorldbookMarker && hasAuthorMarker ? 'success' : 'warning',
                title: 'æ ¼å¼éªŒè¯',
                desc: hasWorldbookMarker && hasAuthorMarker ? 
                      'âœ… åŒ…å«æ ‡å‡†çš„ä¸–ç•Œä¹¦æ ¼å¼å’Œä½œè€…ä¿¡æ¯' : 
                      'âš ï¸ ä¸–ç•Œä¹¦æ ¼å¼æ ‡è®°å¯èƒ½ä¸å®Œæ•´',
                passed: hasWorldbookMarker && hasAuthorMarker
            });
            
            // 3. è¯­ä¹‰é”šç‚¹æ£€æŸ¥
            let anchorsFound = 0;
            const anchorDetails = [];
            
            SEMANTIC_ANCHORS.forEach(anchor => {
                if (text.includes(anchor)) {
                    anchorsFound++;
                    anchorDetails.push(`âœ… ${anchor}`);
                } else {
                    anchorDetails.push(`âŒ ${anchor}`);
                }
            });
            
            results.push({
                type: anchorsFound === SEMANTIC_ANCHORS.length ? 'success' : 'warning',
                title: 'è¯­ä¹‰é”šç‚¹',
                desc: anchorsFound === SEMANTIC_ANCHORS.length ? 
                      `âœ… æ‰¾åˆ°å…¨éƒ¨ ${SEMANTIC_ANCHORS.length} ä¸ªè¯­ä¹‰é”šç‚¹` : 
                      `âš ï¸ æ‰¾åˆ° ${anchorsFound}/${SEMANTIC_ANCHORS.length} ä¸ªé”šç‚¹<br>${anchorDetails.join('<br>')}`,
                passed: anchorsFound === SEMANTIC_ANCHORS.length
            });
            
            // 4. æœ¯è¯­ä½“ç³»æ£€æŸ¥
            let termsFound = 0;
            CYRENE_TERMS.forEach(term => {
                if (text.includes(term)) {
                    termsFound++;
                }
            });
            
            results.push({
                type: termsFound >= 2 ? 'success' : 'warning',
                title: 'æœ¯è¯­éªŒè¯',
                desc: termsFound >= 2 ? 
                      `âœ… æ‰¾åˆ° ${termsFound} ä¸ªCyreneæœ¯è¯­` : 
                      `âš ï¸ åªæ‰¾åˆ° ${termsFound} ä¸ªæœ¯è¯­ï¼Œå¯èƒ½ä¸æ˜¯å®Œæ•´ç‰ˆæœ¬`,
                passed: termsFound >= 2
            });
            
            // 5. å®Œæ•´æ€§æ£€æŸ¥ï¼ˆåŸºäºAES-GCMï¼‰
            results.push({
                type: 'success',
                title: 'å®Œæ•´æ€§éªŒè¯',
                desc: 'âœ… AES-GCMåŠ å¯†éªŒè¯é€šè¿‡ - å†…å®¹æœªè¢«ç¯¡æ”¹',
                passed: true
            });
            
            // 6. æ¸¸æˆè§’è‰²è‡´æ•¬æ£€æŸ¥
            const hasXilian = text.includes('æ˜”æ¶Ÿ');
            results.push({
                type: hasXilian ? 'success' : 'info',
                title: 'ç‰¹åˆ«è‡´æ•¬',
                desc: hasXilian ? 
                      'âœ… æ£€æµ‹åˆ°å¯¹ã€Œæ˜”æ¶Ÿã€çš„è‡´æ•¬' : 
                      'â„¹ï¸ æœªæ‰¾åˆ°ç‰¹åˆ«è‡´æ•¬å†…å®¹',
                passed: true  // æ­¤é¡¹ä¸å½±å“æ€»ä½“éªŒè¯
            });
            
            // 7. å…ƒæ•°æ®ä¸€è‡´æ€§æ£€æŸ¥
            const metadata = encryptedData.metadata;
            const hasConsistentAuthor = metadata.author === 'Sylvia' || text.includes(metadata.author || '');
            
            results.push({
                type: hasConsistentAuthor ? 'success' : 'warning',
                title: 'å…ƒæ•°æ®ä¸€è‡´æ€§',
                desc: hasConsistentAuthor ? 
                      'âœ… ä½œè€…ä¿¡æ¯ä¸€è‡´' : 
                      'âš ï¸ ä½œè€…ä¿¡æ¯å¯èƒ½å­˜åœ¨ä¸ä¸€è‡´',
                passed: hasConsistentAuthor
            });
            
            return results;
        }

        // æ˜¾ç¤ºéªŒè¯ç»“æœ
        function displayVerificationResults(results) {
            elements.verificationResults.innerHTML = '';
            
            let allPassed = true;
            let criticalPassed = true;
            
            // ç»Ÿè®¡é€šè¿‡æƒ…å†µ
            results.forEach(result => {
                if (!result.passed && result.type !== 'info') {
                    allPassed = false;
                    if (result.type === 'error' || result.type === 'warning') {
                        criticalPassed = false;
                    }
                }
            });
            
            // æ€»ä½“éªŒè¯ç»“æœ
            const totalResults = results.length;
            const passedResults = results.filter(r => r.passed || r.type === 'info').length;
            
            const summaryCard = document.createElement('div');
            summaryCard.className = `verification-card ${allPassed ? 'success' : criticalPassed ? 'warning' : 'error'}`;
            summaryCard.innerHTML = `
                <div class="verification-header">
                    <div class="verification-icon ${allPassed ? 'success' : criticalPassed ? 'warning' : 'error'}">
                        ${allPassed ? 'âœ“' : criticalPassed ? '!' : 'âœ—'}
                    </div>
                    <div class="verification-title">æ€»ä½“éªŒè¯</div>
                </div>
                <div class="verification-desc">
                    ${passedResults}/${totalResults} é¡¹éªŒè¯é€šè¿‡<br>
                    ${allPassed ? 'âœ… æ‰€æœ‰éªŒè¯é€šè¿‡ï¼Œè¿™æ˜¯åŸå§‹ç‰ˆæœ¬' : 
                      criticalPassed ? 'âš ï¸ éƒ¨åˆ†éªŒè¯æœªé€šè¿‡ï¼Œå»ºè®®æ£€æŸ¥' : 
                      'âŒ å…³é”®éªŒè¯å¤±è´¥ï¼Œå¯èƒ½è¢«ç¯¡æ”¹'}
                </div>
            `;
            elements.verificationResults.appendChild(summaryCard);
            
            // å„é¡¹éªŒè¯ç»“æœ
            results.forEach(result => {
                const card = document.createElement('div');
                card.className = `verification-card ${result.type}`;
                card.innerHTML = `
                    <div class="verification-header">
                        <div class="verification-icon ${result.type}">
                            ${result.type === 'success' ? 'âœ“' : result.type === 'warning' ? '!' : result.type === 'error' ? 'âœ—' : 'â„¹'}
                        </div>
                        <div class="verification-title">${result.title}</div>
                    </div>
                    <div class="verification-desc">${result.desc}</div>
                `;
                elements.verificationResults.appendChild(card);
            });
            
            // æ˜¾ç¤º/éšè—è­¦å‘Š
            elements.warningAlert.style.display = allPassed ? 'none' : 'block';
            
            return allPassed;
        }

        // é«˜äº®å…³é”®è¯
        function highlightKeywords(text) {
            let highlighted = text;
            
            // é«˜äº®è¯­ä¹‰é”šç‚¹
            SEMANTIC_ANCHORS.forEach(anchor => {
                const regex = new RegExp(anchor.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                highlighted = highlighted.replace(regex, `<span class="highlight">${anchor}</span>`);
            });
            
            // é«˜äº®æœ¯è¯­
            CYRENE_TERMS.forEach(term => {
                const regex = new RegExp(term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g');
                highlighted = highlighted.replace(regex, `<span class="highlight">${term}</span>`);
            });
            
            return highlighted;
        }

        // ä¸»è§£å¯†å‡½æ•°
        async function decryptAndVerify() {
            const encryptedText = elements.encryptedText.value.trim();
            const password = elements.password.value.trim();
            
            if (!encryptedText) {
                showError('è¯·ç²˜è´´åŠ å¯†æ–‡æœ¬');
                return;
            }
            
            if (!password) {
                showError('è¯·è¾“å…¥è§£å¯†å¯†ç ');
                return;
            }
            
            try {
                // æ˜¾ç¤ºè¿›åº¦
                showProgress(0, 'å¼€å§‹å¤„ç†...');
                elements.resultSection.classList.add('show');
                elements.decryptedSection.style.display = 'none';
                
                // è§£æåŠ å¯†æ–‡æœ¬
                const encryptedData = parseEncryptedText(encryptedText);
                
                // è§£å¯†
                const decryptedText = await decryptAESGCM(encryptedData, password);
                
                showProgress(90, 'æ­£åœ¨éªŒè¯...');
                
                // éªŒè¯
                const verificationResults = verifyWorldbook(decryptedText, encryptedData);
                
                // æ˜¾ç¤ºéªŒè¯ç»“æœ
                const allPassed = displayVerificationResults(verificationResults);
                
                // æ˜¾ç¤ºè§£å¯†æ–‡æœ¬
                elements.decryptedText.innerHTML = highlightKeywords(decryptedText);
                elements.decryptedSection.style.display = 'block';
                
                // å®Œæˆ
                showProgress(100, 'å®Œæˆï¼');
                
                // æ·»åŠ æˆåŠŸæ¶ˆæ¯
                if (allPassed) {
                    showSuccess('è§£å¯†å’ŒéªŒè¯å®Œæˆï¼ä¸–ç•Œä¹¦å·²å‡†å¤‡å°±ç»ªã€‚');
                } else {
                    showSuccess('è§£å¯†å®Œæˆï¼Œä½†éƒ¨åˆ†éªŒè¯æœªé€šè¿‡ã€‚è¯·è°¨æ…ä½¿ç”¨ã€‚');
                }
                
                // æ»šåŠ¨åˆ°ç»“æœ
                setTimeout(() => {
                    elements.resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    hideProgress();
                }, 500);
                
            } catch (error) {
                showError(error.message);
                hideProgress();
            }
        }

        // å¤åˆ¶è§£å¯†æ–‡æœ¬
        function copyDecryptedText() {
            const text = elements.decryptedText.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                showSuccess('ä¸–ç•Œä¹¦å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            }).catch(err => {
                // å¤‡ç”¨æ–¹æ³•
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showSuccess('ä¸–ç•Œä¹¦å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆå¤‡ç”¨æ–¹æ³•ï¼‰ï¼');
            });
        }

        // ä¸‹è½½è§£å¯†æ–‡æœ¬
        function downloadDecryptedText() {
            const text = elements.decryptedText.textContent;
            const metadata = `=== Cyrene Worldbook ===
è§£å¯†æ—¶é—´: ${new Date().toLocaleString()}
éªŒè¯çŠ¶æ€: å·²éªŒè¯
ä½œè€…: Sylvia
å·¥å…·ç‰ˆæœ¬: 2026.1.12

`;
            
            const fullText = metadata + text;
            const blob = new Blob([fullText], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Cyrene_Worldbook_${new Date().toISOString().slice(0,10)}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showSuccess('ä¸–ç•Œä¹¦å·²ä¸‹è½½ï¼');
        }

        // æ‰“å°è§£å¯†æ–‡æœ¬
        function printDecryptedText() {
            const printContent = `
                <html>
                <head>
                    <title>Cyrene Worldbook - æ‰“å°ç‰ˆ</title>
                    <style>
                        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
                        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 10px; }
                        .content { white-space: pre-wrap; font-family: monospace; }
                        @media print {
                            .no-print { display: none; }
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Cyrene Worldbook</h1>
                        <p>è§£å¯†æ—¶é—´: ${new Date().toLocaleString()} | ä½œè€…: Sylvia</p>
                    </div>
                    <div class="content">${elements.decryptedText.textContent}</div>
                    <div class="no-print" style="margin-top: 20px; text-align: center;">
                        <button onclick="window.close()">å…³é—­</button>
                    </div>
                </body>
                </html>
            `;
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(printContent);
            printWindow.document.close();
            printWindow.focus();
            
            setTimeout(() => {
                printWindow.print();
            }, 500);
        }

        // åˆ‡æ¢ä¸»é¢˜
        function toggleTheme() {
            const body = document.body;
            const isDark = body.style.background.includes('#1a202c');
            
            if (isDark) {
                body.style.background = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
                body.style.color = '#2d3748';
            } else {
                body.style.background = 'linear-gradient(135deg, #1a202c 0%, #2d3748 100%)';
                body.style.color = '#e2e8f0';
            }
            
            showSuccess('ä¸»é¢˜å·²åˆ‡æ¢ï¼');
        }

        // æ˜¾ç¤ºå¸®åŠ©
        function showHelp() {
            alert(`Cyrene Worldbook è§£å¯†å·¥å…· - ä½¿ç”¨å¸®åŠ©

1. è·å–åŠ å¯†æ–‡æœ¬ï¼š
   - ä» Sylvia å¤„è·å¾—åŠ å¯†çš„ä¸–ç•Œä¹¦æ–‡æœ¬
   - å®Œæ•´å¤åˆ¶æ‰€æœ‰å†…å®¹ï¼ˆä» "=== Cyrene Worldbook Encrypted ===" å¼€å§‹ï¼‰

2. è§£å¯†æ­¥éª¤ï¼š
   - ç²˜è´´åˆ°ä¸Šæ–¹æ–‡æœ¬æ¡†
   - è¾“å…¥è§£å¯†å¯†ç ï¼ˆé»˜è®¤ä¸º cyrene_open_2024ï¼‰
   - ç‚¹å‡»"è§£å¯†å¹¶éªŒè¯å®Œæ•´æ€§"

3. éªŒè¯è¯´æ˜ï¼š
   - ç»¿è‰²âœ…ï¼šéªŒè¯é€šè¿‡
   - é»„è‰²âš ï¸ï¼šéƒ¨åˆ†éªŒè¯æœªé€šè¿‡
   - çº¢è‰²âŒï¼šå…³é”®éªŒè¯å¤±è´¥

4. ä½¿ç”¨è§£å¯†åçš„æ–‡æœ¬ï¼š
   - å¤åˆ¶æ–‡æœ¬ç»™AIä½¿ç”¨
   - ä¸‹è½½ä¿å­˜åˆ°æœ¬åœ°
   - æ‰“å°å‚è€ƒ

5. æ³¨æ„äº‹é¡¹ï¼š
   - ä»»ä½•å¯¹åŠ å¯†æ–‡æœ¬çš„ä¿®æ”¹éƒ½ä¼šå¯¼è‡´è§£å¯†å¤±è´¥
   - ç¡®ä¿ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„å·¥å…·
   - å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³» Sylvia

å·¥å…·ç‰ˆæœ¬ï¼š2026.1.12
è‡´æ•¬ï¼šæ˜”æ¶Ÿ`);
        }

        // æŠ¥å‘Šé—®é¢˜
        function reportIssue() {
            const issueUrl = `https://github.com/${GITHUB_USERNAME}/cyrene-decrypt/issues/new?title=é—®é¢˜æŠ¥å‘Š&body=è¯·æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜ï¼š`;
            window.open(issueUrl, '_blank');
            showSuccess('å·²æ‰“å¼€é—®é¢˜æŠ¥å‘Šé¡µé¢ã€‚è¯·è¯¦ç»†æè¿°æ‚¨é‡åˆ°çš„é—®é¢˜ã€‚');
        }

        // æ£€æŸ¥æ›´æ–°
        function checkUpdates() {
            showProgress(0, 'æ£€æŸ¥æ›´æ–°...');
            
            setTimeout(() => {
                showProgress(100, 'æ£€æŸ¥å®Œæˆ');
                setTimeout(() => {
                    hideProgress();
                    alert('å½“å‰å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼š2026.1.12\n\næ–°åŠŸèƒ½ï¼š\n- å®Œæ•´çš„è¯­ä¹‰é”šç‚¹éªŒè¯\n- å¢å¼ºçš„å®Œæ•´æ€§æ£€æŸ¥\n- ä¼˜åŒ–çš„ç”¨æˆ·ç•Œé¢\n- è‡´æ•¬æ˜”æ¶Ÿçš„ç‰¹åˆ«ç‰ˆæœ¬');
                }, 500);
            }, 1500);
        }

        // æ·»åŠ é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + Enter è§£å¯†
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                decryptAndVerify();
            }
            
            // Ctrl/Cmd + L åŠ è½½ç¤ºä¾‹
            if ((e.ctrlKey || e.metaKey) && e.key === 'L') {
                e.preventDefault();
                loadExample();
            }
            
            // Ctrl/Cmd + C å¤åˆ¶è§£å¯†æ–‡æœ¬
            if ((e.ctrlKey || e.metaKey) && e.key === 'C' && elements.decryptedSection.style.display !== 'none') {
                e.preventDefault();
                copyDecryptedText();
            }
        });

        // æ·»åŠ ç²˜è´´äº‹ä»¶ç›‘å¬
        elements.encryptedText.addEventListener('paste', (e) => {
            setTimeout(() => {
                const text = e.target.value;
                if (text.includes('=== Cyrene Worldbook Encrypted ===')) {
                    showSuccess('æ£€æµ‹åˆ°æœ‰æ•ˆçš„åŠ å¯†æ–‡æœ¬ï¼');
                }
            }, 100);
        });

        // å¯¼å‡ºå‡½æ•°åˆ°å…¨å±€ä½œç”¨åŸŸï¼ˆä¸ºäº†HTMLä¸­çš„onclickï¼‰
        window.decryptAndVerify = decryptAndVerify;
        window.loadExample = loadExample;
        window.clearAll = clearAll;
        window.toggleTheme = toggleTheme;
        window.copyDecryptedText = copyDecryptedText;
        window.downloadDecryptedText = downloadDecryptedText;
        window.printDecryptedText = printDecryptedText;
        window.showHelp = showHelp;
        window.reportIssue = reportIssue;
        window.checkUpdates = checkUpdates;
    </script>
</body>
</html>
